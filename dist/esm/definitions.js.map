{"version":3,"file":"definitions.js","sourceRoot":"","sources":["../../src/definitions.ts"],"names":[],"mappings":"","sourcesContent":["export interface ApkFilesPlugin {\r\n  /**\r\n   * List APK files found in the Downloads directories\r\n   * @param options - Optional filtering options\r\n   */\r\n  listDownloadApks(options?: ListApksOptions): Promise<ApkListResult>;\r\n\r\n  /**\r\n   * List all APK files on the device (including Downloads and other directories)\r\n   * @param options - Optional filtering options\r\n   */\r\n  listAllApks(options?: ListApksOptions): Promise<ApkListResult>;\r\n\r\n  /**\r\n   * Debug scan to check Download directories and their contents\r\n   */\r\n  debugScan(): Promise<DebugScanResult>;\r\n\r\n  /**\r\n   * Scan a specific directory path for APK files\r\n   * @param options - Path and filtering options\r\n   */\r\n  scanSpecificPath(options: ScanPathOptions): Promise<ScanPathResult>;\r\n\r\n  /**\r\n   * Request \"All Files Access\" permission (Android 11+)\r\n   */\r\n  requestAllFilesAccess(): Promise<PermissionResult>;\r\n\r\n  /**\r\n   * Check current permissions status\r\n   */\r\n  checkPermissions(): Promise<PermissionsStatus>;\r\n\r\n  /**\r\n   * Install an APK file\r\n   * @param options - Installation options with file path\r\n   */\r\n  installApk(options: InstallApkOptions): Promise<InstallResult>;\r\n\r\n  /**\r\n   * Start listening for download completion events\r\n   * Returns a promise that resolves when listener is active\r\n   * Fires 'downloadComplete' event when downloads finish\r\n   */\r\n  startDownloadListener(): Promise<DownloadListenerResult>;\r\n\r\n  /**\r\n   * Stop listening for download completion events\r\n   */\r\n  stopDownloadListener(): Promise<DownloadListenerResult>;\r\n\r\n  /**\r\n   * Download an APK file using Android DownloadManager\r\n   * @param options - Download options including URL and filename\r\n   */\r\n  downloadApk(options: DownloadApkOptions): Promise<DownloadResult>;\r\n\r\n  /**\r\n   * Get the status of a download\r\n   * @param options - Download ID to check\r\n   */\r\n  getDownloadStatus(options: DownloadStatusOptions): Promise<DownloadStatus>;\r\n\r\n  /**\r\n   * Cancel an ongoing download\r\n   * @param options - Download ID to cancel\r\n   */\r\n  cancelDownload(options: CancelDownloadOptions): Promise<CancelDownloadResult>;\r\n\r\n  /**\r\n   * Delete an APK file from storage\r\n   * @param options - File path to delete\r\n   */\r\n  deleteApk(options: DeleteApkOptions): Promise<DeleteApkResult>;\r\n\r\n  /**\r\n   * Start monitoring download progress for a specific download\r\n   * Fires 'downloadProgress' events with real-time progress updates\r\n   * @param options - Download ID to monitor\r\n   */\r\n  startDownloadProgressListener(options: DownloadProgressOptions): Promise<DownloadProgressListenerResult>;\r\n\r\n  /**\r\n   * Stop monitoring download progress\r\n   */\r\n  stopDownloadProgressListener(): Promise<DownloadProgressListenerResult>;\r\n\r\n  /**\r\n   * Add a listener for download completion events\r\n   * @param eventName - Event name ('downloadComplete')\r\n   * @param listenerFunc - Callback function\r\n   */\r\n  addListener(\r\n    eventName: 'downloadComplete',\r\n    listenerFunc: (data: DownloadCompleteEvent) => void,\r\n  ): Promise<PluginListenerHandle>;\r\n\r\n  /**\r\n   * Add a listener for installation events\r\n   * @param eventName - Event name ('installationStarted')\r\n   * @param listenerFunc - Callback function\r\n   */\r\n  addListener(\r\n    eventName: 'installationStarted',\r\n    listenerFunc: (data: InstallationEvent) => void,\r\n  ): Promise<PluginListenerHandle>;\r\n\r\n  /**\r\n   * Add a listener for download progress events\r\n   * @param eventName - Event name ('downloadProgress')\r\n   * @param listenerFunc - Callback function\r\n   */\r\n  addListener(\r\n    eventName: 'downloadProgress',\r\n    listenerFunc: (data: DownloadProgressEvent) => void,\r\n  ): Promise<PluginListenerHandle>;\r\n\r\n  /**\r\n   * Remove all listeners for this plugin\r\n   */\r\n  removeAllListeners(): Promise<void>;\r\n}\r\n\r\nexport interface ListApksOptions {\r\n  /**\r\n   * Filter results by package name (appId)\r\n   */\r\n  appId?: string;\r\n\r\n  /**\r\n   * If true, only returns the latest version of each app\r\n   * (based on versionCode)\r\n   */\r\n  onlyLatest?: boolean;\r\n}\r\n\r\nexport interface ApkListResult {\r\n  /**\r\n   * Array of APK files found\r\n   */\r\n  files: ApkFile[];\r\n\r\n  /**\r\n   * Total count of files found\r\n   */\r\n  count: number;\r\n\r\n  /**\r\n   * Package name used for filtering (if any)\r\n   */\r\n  filteredBy?: string;\r\n\r\n  /**\r\n   * Whether only latest versions were returned\r\n   */\r\n  onlyLatest?: boolean;\r\n}\r\n\r\nexport interface ApkFile {\r\n  /**\r\n   * File name\r\n   */\r\n  name: string;\r\n\r\n  /**\r\n   * Content URI of the file\r\n   */\r\n  uri: string;\r\n\r\n  /**\r\n   * Absolute file path (may not be available on all Android versions)\r\n   */\r\n  path?: string;\r\n\r\n  /**\r\n   * File size in bytes\r\n   */\r\n  size: number;\r\n\r\n  /**\r\n   * Last modified timestamp (milliseconds since epoch)\r\n   */\r\n  lastModified?: number;\r\n\r\n  /**\r\n   * Source where the file was found\r\n   * (e.g., \"Downloads\", \"MediaStore_Downloads\", \"Storage\")\r\n   */\r\n  source: string;\r\n\r\n  /**\r\n   * Package name / application ID\r\n   */\r\n  appId?: string;\r\n\r\n  /**\r\n   * Version name (e.g., \"1.0.0\")\r\n   */\r\n  apkVersionName?: string;\r\n\r\n  /**\r\n   * Version code (numeric version)\r\n   */\r\n  apkVersionCode?: number | string;\r\n}\r\n\r\nexport interface DebugScanResult {\r\n  /**\r\n   * Information about scanned download directories\r\n   */\r\n  downloadDirectories: DirectoryInfo[];\r\n\r\n  /**\r\n   * Whether storage permission is granted\r\n   */\r\n  hasStoragePermission: boolean;\r\n\r\n  /**\r\n   * External storage state\r\n   */\r\n  externalStorageState: string;\r\n}\r\n\r\nexport interface DirectoryInfo {\r\n  /**\r\n   * Directory path\r\n   */\r\n  path: string;\r\n\r\n  /**\r\n   * Whether directory exists\r\n   */\r\n  exists: boolean;\r\n\r\n  /**\r\n   * Whether path is a directory\r\n   */\r\n  isDirectory: boolean;\r\n\r\n  /**\r\n   * Whether directory is readable\r\n   */\r\n  canRead: boolean;\r\n\r\n  /**\r\n   * Total number of files in directory\r\n   */\r\n  totalFiles?: number;\r\n\r\n  /**\r\n   * Number of APK files found\r\n   */\r\n  apkCount?: number;\r\n\r\n  /**\r\n   * List of files in directory\r\n   */\r\n  files?: FileInfo[];\r\n\r\n  /**\r\n   * Error message if scan failed\r\n   */\r\n  error?: string;\r\n}\r\n\r\nexport interface FileInfo {\r\n  /**\r\n   * File name\r\n   */\r\n  name: string;\r\n\r\n  /**\r\n   * Whether it's a file (not directory)\r\n   */\r\n  isFile: boolean;\r\n\r\n  /**\r\n   * File size in bytes\r\n   */\r\n  size: number;\r\n\r\n  /**\r\n   * Whether file is readable\r\n   */\r\n  canRead: boolean;\r\n\r\n  /**\r\n   * Whether file is an APK\r\n   */\r\n  isAPK?: boolean;\r\n\r\n  /**\r\n   * APK version name (if available)\r\n   */\r\n  apkVersionName?: string;\r\n\r\n  /**\r\n   * APK version code (if available)\r\n   */\r\n  apkVersionCode?: number;\r\n\r\n  /**\r\n   * Package name (if available)\r\n   */\r\n  appId?: string;\r\n}\r\n\r\nexport interface ScanPathOptions {\r\n  /**\r\n   * Directory path to scan\r\n   */\r\n  path: string;\r\n\r\n  /**\r\n   * Filter results by package name\r\n   */\r\n  appId?: string;\r\n\r\n  /**\r\n   * If true, only returns the latest version of each app\r\n   */\r\n  onlyLatest?: boolean;\r\n}\r\n\r\nexport interface ScanPathResult extends ApkListResult {\r\n  /**\r\n   * Path that was scanned\r\n   */\r\n  scannedPath: string;\r\n\r\n  /**\r\n   * Whether the path exists\r\n   */\r\n  pathExists: boolean;\r\n\r\n  /**\r\n   * Whether the path is a directory\r\n   */\r\n  pathIsDirectory: boolean;\r\n\r\n  /**\r\n   * Whether the path is readable\r\n   */\r\n  pathCanRead: boolean;\r\n}\r\n\r\nexport interface PermissionResult {\r\n  /**\r\n   * Whether permission is granted\r\n   */\r\n  granted: boolean;\r\n\r\n  /**\r\n   * Status message\r\n   */\r\n  message: string;\r\n}\r\n\r\nexport interface PermissionsStatus {\r\n  /**\r\n   * Whether storage permission is granted\r\n   */\r\n  hasStoragePermission: boolean;\r\n\r\n  /**\r\n   * Whether \"All Files Access\" is granted (Android 11+)\r\n   */\r\n  hasAllFilesAccess: boolean;\r\n\r\n  /**\r\n   * Whether app can request package installs\r\n   */\r\n  canRequestInstallPackages: boolean;\r\n\r\n  /**\r\n   * Android SDK version\r\n   */\r\n  sdkVersion: number;\r\n\r\n  /**\r\n   * Whether READ_EXTERNAL_STORAGE is granted\r\n   */\r\n  readExternalStorage: boolean;\r\n}\r\n\r\nexport interface InstallApkOptions {\r\n  /**\r\n   * Absolute path to the APK file\r\n   */\r\n  path: string;\r\n}\r\n\r\nexport interface InstallResult {\r\n  /**\r\n   * Installation status\r\n   * \"installation_started\" - Intent launched successfully\r\n   * \"permission_required\" - Need to enable install permission\r\n   */\r\n  status: string;\r\n\r\n  /**\r\n   * Status message\r\n   */\r\n  message: string;\r\n\r\n  /**\r\n   * Path of the APK concerned (only when permission_required)\r\n   */\r\n  apkPath?: string;\r\n}\r\n\r\nexport interface DownloadListenerResult {\r\n  /**\r\n   * Whether listener is active\r\n   */\r\n  listening: boolean;\r\n\r\n  /**\r\n   * Status message\r\n   */\r\n  message: string;\r\n\r\n  /**\r\n   * Android SDK version (when starting listener)\r\n   */\r\n  sdkVersion?: number;\r\n}\r\n\r\nexport interface DownloadApkOptions {\r\n  /**\r\n   * URL of the APK file to download\r\n   */\r\n  path: string;\r\n\r\n  /**\r\n   * Title shown in download notification\r\n   */\r\n  title?: string;\r\n\r\n  /**\r\n   * Description shown in download notification\r\n   */\r\n  description?: string;\r\n}\r\n\r\nexport interface DownloadResult {\r\n  /**\r\n   * Download ID assigned by DownloadManager\r\n   */\r\n  downloadId: number;\r\n\r\n  /**\r\n   * Filename being downloaded\r\n   */\r\n  fileName: string;\r\n\r\n  /**\r\n   * URL being downloaded\r\n   */\r\n  url: string;\r\n\r\n  /**\r\n   * Status message (deprecated, use other fields)\r\n   */\r\n  message?: string;\r\n}\r\n\r\nexport interface DownloadStatusOptions {\r\n  /**\r\n   * Download ID to check\r\n   */\r\n  downloadId: number;\r\n}\r\n\r\nexport interface DownloadStatus {\r\n  /**\r\n   * Download ID\r\n   */\r\n  downloadId: number;\r\n\r\n  /**\r\n   * Status string: \"PENDING\", \"RUNNING\", \"PAUSED\", \"SUCCESSFUL\", \"FAILED\", \"UNKNOWN\"\r\n   */\r\n  status: string;\r\n\r\n  /**\r\n   * Status code (numeric)\r\n   */\r\n  statusCode: number;\r\n\r\n  /**\r\n   * Reason code (for failures/pauses)\r\n   */\r\n  reason: number;\r\n\r\n  /**\r\n   * Bytes downloaded so far\r\n   */\r\n  bytesDownloaded: number;\r\n\r\n  /**\r\n   * Total bytes to download\r\n   */\r\n  bytesTotal: number;\r\n\r\n  /**\r\n   * File URI (available when complete)\r\n   */\r\n  uri?: string;\r\n\r\n  /**\r\n   * Download title\r\n   */\r\n  title?: string;\r\n\r\n  /**\r\n   * Download progress percentage (0-100)\r\n   */\r\n  progress?: number;\r\n}\r\n\r\nexport interface CancelDownloadOptions {\r\n  /**\r\n   * Download ID to cancel\r\n   */\r\n  downloadId: number;\r\n}\r\n\r\nexport interface CancelDownloadResult {\r\n  /**\r\n   * Whether download was removed\r\n   */\r\n  removed: boolean;\r\n\r\n  /**\r\n   * Download ID that was cancelled\r\n   */\r\n  downloadId: number;\r\n}\r\n\r\nexport interface DeleteApkOptions {\r\n  /**\r\n   * Absolute path to the APK file to delete\r\n   */\r\n  path: string;\r\n}\r\n\r\nexport interface DeleteApkResult {\r\n  /**\r\n   * Whether file was deleted successfully\r\n   */\r\n  deleted: boolean;\r\n\r\n  /**\r\n   * Path that was deleted\r\n   */\r\n  path: string;\r\n}\r\n\r\nexport interface DownloadProgressOptions {\r\n  /**\r\n   * Download ID to monitor\r\n   */\r\n  downloadId: number;\r\n}\r\n\r\nexport interface DownloadProgressListenerResult {\r\n  /**\r\n   * Whether progress listener is active\r\n   */\r\n  listening: boolean;\r\n\r\n  /**\r\n   * Download ID being monitored\r\n   */\r\n  downloadId?: number;\r\n\r\n  /**\r\n   * Status message\r\n   */\r\n  message?: string;\r\n}\r\n\r\nexport interface DownloadCompleteEvent {\r\n  /**\r\n   * Event type\r\n   */\r\n  event: 'download_complete';\r\n\r\n  /**\r\n   * Download ID that completed\r\n   */\r\n  downloadId: number;\r\n\r\n  /**\r\n   * Timestamp when download completed (milliseconds since epoch)\r\n   */\r\n  timestamp: number;\r\n\r\n  /**\r\n   * APK file path (if available)\r\n   */\r\n  apkPath?: string;\r\n}\r\n\r\n/**\r\n * Event fired when installation is triggered (after permission grant or directly)\r\n */\r\nexport interface InstallationEvent {\r\n  /**\r\n   * Event type: 'installation_started' or 'installation_error'\r\n   */\r\n  event: 'installation_started' | 'installation_error';\r\n\r\n  /**\r\n   * Installation status\r\n   */\r\n  status: 'installation_started' | 'error';\r\n\r\n  /**\r\n   * Status message\r\n   */\r\n  message: string;\r\n\r\n  /**\r\n   * Path of the APK being installed (optional)\r\n   */\r\n  path?: string;\r\n}\r\n\r\n/**\r\n * Event fired during download progress\r\n * Updates every ~500ms while download is active\r\n */\r\nexport interface DownloadProgressEvent {\r\n  /**\r\n   * Download ID being monitored\r\n   */\r\n  downloadId: number;\r\n\r\n  /**\r\n   * Bytes downloaded so far\r\n   */\r\n  bytesDownloaded: number;\r\n\r\n  /**\r\n   * Total bytes to download\r\n   */\r\n  bytesTotal: number;\r\n\r\n  /**\r\n   * Download progress percentage (0-100)\r\n   */\r\n  progress: number;\r\n\r\n  /**\r\n   * Current download status: \"PENDING\", \"RUNNING\", \"PAUSED\", \"SUCCESSFUL\", \"FAILED\"\r\n   */\r\n  status: string;\r\n\r\n  /**\r\n   * Status code (numeric)\r\n   */\r\n  statusCode: number;\r\n\r\n  /**\r\n   * Error message (only present if status is \"FAILED\")\r\n   */\r\n  error?: string;\r\n}\r\n\r\nexport interface PluginListenerHandle {\r\n  remove: () => Promise<void>;\r\n}\r\n"]}